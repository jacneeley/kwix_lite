<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link th:href="@{/styles/global.css}" rel="stylesheet" />
    <title>KWIX | Payroll</title>
  </head>
  <body>
	<nav></nav>
	<div class="content">
		<a id="return-page" 
			th:attr="onclick=|returnToPage('${pageUtil.moveBackToPrev()}'); return true;|"
			class="arrow">←
		</a>
		<h2>Manage Payroll</h2>
		<a class="del arrow smaller" href="/deletedpaystubs">Recently Deleted →</a>
		<hr />
		<div>
			<div class="filter-fields">
				<label>Employee Name:</label>
				<input type="text" class="filter-input" />
				<label>Day Worked:</label>
				<input type="text" class="filter-input" />
				<label>Jobsite Worked:</label>
				<input type="text" class="filter-input" />
				<label>Pay:</label>
				<input type="text" class="filter-input date" />
				<label>Hours Worked:</label>
				<input type="text" class="filter-input date" />
				<label>Entered:</label>
				<input type="text" class="filter-input date" />
				<label>Last Modified:</label>
				<input type="text" class="filter-input date" />
				<p id="searchError" style="display: none;">No records could be found...</p>
			</div>
			<h3>Paystubs:</h3>
			<div th:if="${paystubs.isEmpty()}">No paystubs found...</div>
			<div th:unless="${paystubs.isEmpty()}">
				<table id="filter-tb-payroll" class="payroll-tb">
					<tr class="header">
						<th>Employee</th>
						<th>Day Worked</th>
				        <th>Jobsite Worked</th>
						<th>Pay</th>
						<th>Hours Worked</th>
				        <th>Entered</th>
				        <th>Last Modified</th>
				        <th>Edit</th>
				    </th>
				    <tr th:unless="${paystubs.isEmpty()}" th:each="paystub : ${paystubs}">
						<td th:text="${paystub.fullName}"></td>
						<td th:text="${payrollCtrlr.formatedDate(paystub.dayWorked)}"></td>
						<td th:text="${paystub.jobsite}"></td>
						<td th:text="${paystub.pay}"></td>
						<td th:text="${paystub.hoursWorked}"></td>
				        <td th:text="${paystub.createAt}"></td>
				        <td th:text="${paystub.updateAt}"></td>
				        <td class="edit-td"><a th:href="@{/paystub/{id}(id=${paystub.paystubNum})}" class="edit">✏</a></td>
				    </tr>
				</table>
			</div>
			<h3>Employees:</h3>
			<table id="filter-tb-emp" class="payroll-tb">
			    <tr class="header">
			        <th>Id</th>
			        <th>Name</th>
			        <th>Phone</th>
					<th>Pay</th>
			        <th>Created</th>
			        <th>Last Modified</th>
			        <th>Add Hours</th>
			    </tr>
			    <tr th:if="${employees.isEmpty()}">
			        <td colspan="7">No Employees Found...</td>
					<td colspan="7"><a href="employees">Add</a></td>
			    </tr>
			    <tr th:unless="${employees.isEmpty()}" th:each="employee : ${employees}">
			        <td>
						<a th:href="@{employee/{id}(id=${employee.id})}">
							<p th:text="${employee.id}"></p>
						</a>
					</td>
					<td th:text="${employee.getFullName()}"></td>
			        <td th:text="${employee.phone}"></td>
					<td th:text="${employee.pay}"></td>
			        <td th:text="${empController.formatedDate(employee.createAt)}"></td>
			        <td th:text="${empController.formatedDate(employee.updateAt)}"></td>
			        <td class="edit-td"><a th:href="@{paystubs/{id}(id=${employee.id})}" class="edit">+</a></td>
			    </tr>
			</table>
			<button type="button" class="exp" th:onclick="alert('Not available in demo version. \nThis Feature is for paid users only.')">Export</button>
		</div>
	</div>
	<script th:src="@{/js/navComponent.js}"></script>
	<script th:src="@{/js/handleReturn.js}"></script>
	<script th:src="@{/js/filter.js}"></script>
  </body>
</html>