<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link th:href="@{/styles/global.css}" rel="stylesheet" />
    <title>KWIX | Jobsites</title>
  </head>
  <body>
	<nav></nav>
	<div class="content">
		<a id="return-page" 
			th:attr="onclick=|returnToPage('${pageUtil.moveBackToPrev()}'); return true;|"
			class="arrow">←
		</a>
		<h2>Manage Jobsites</h2>
		<a class="del arrow smaller" href="/deletedjobsites">Recently Deleted →</a>
		<hr />
		<div class="msg" th:if="${userMessage}" th:utext="${userMessage}"></div>
		<div class="form">
			<form method = "post" th:action="@{/jobsites}" th:object="${jobsite}">
				<label>Jobsite Name:</label>
				<input placeholder="Enter Jobsite Name" required th:field="*{jobsiteName}" type="text"/>
				<label>Contract Job?</label>
				<div class="radios">
					<input type="radio" name="No" value="false" th:field="*{contract}" />
					<label>No</label>
					<input type="radio" name="Yes" value="true" th:field="*{contract}" />
					<label>Yes</label>
				</div>
			    <input class="add btn" type="submit" value="Add Jobsite">
			    <input class="btn" type="reset" value="Reset">
			</form>
		</div>
		<div>
			<h3>Jobsites:</h3>
			<table>
			    <tr class="header">
			        <th>Jobsite Name</th>
			        <th>Contract Job</th>
			        <th>Created</th>
			        <th>Last Modified</th>
			        <th>Edit</th>
			    </tr>
			    <tr th:if="${jobsites.isEmpty()}">
			        <td colspan="7">No Josbite Found...</td>
			    </tr>
			    <tr th:unless="${jobsites.isEmpty()}" th:each="jobsite : ${jobsites}">
					<td th:text="${jobsite.jobsiteName}"></td>
			        <td th:text="${jobsite.contract}"></td>
			        <td th:text="${jobsite.createdAt}"></td>
			        <td th:text="${jobsite.updatedAt}"></td>
			        <td class="edit-td"><a th:href="@{jobsite/{id}(id=${jobsite.id})}" class="edit">✏</a></td>
			    </tr>
			</table>
		</div>
	</div>
	<script th:src="@{/js/navComponent.js}"></script>
	<script th:src="@{/js/handleReturn.js}"></script>
  </body>
</html>